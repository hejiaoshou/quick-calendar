function buildUniqueId(t){const e=[];e.push(DeviceUtil.getAdvertisingId()),e.push(DeviceUtil.getAndroidId()),Promise.all(e).then(e=>{const n=e[0];const o=e[1];StorageUtil.putData(constants.MOBILE_ADVERTISING_ID,n);StorageUtil.putData(constants.MOBILE_ANDROID_ID,o);StorageUtil.putData("umeng_uniqueid",o||n);t(o?o:n)})}function createCommonjsModule(t,e){return e={exports:{}},t(e,e.exports),e.exports}function MD5$1(t){return MD5(t)}function encode(t){return Base64_2.encode(t,!1)}function decode(t){return Base64_2.decode(t)}function checkEmptyArgument(t){return t.length&&this.checkId(t[0])}function checkId(t){return t&&"string"==typeof t}function toStr(t){let e="";if(t)try{e=JSON.stringify(t)}catch(t){}return e}function stringToArray(t){if(t)try{return JSON.parse(t)}catch(t){}return[]}function toObject(t){if(t)try{return JSON.parse(t)}catch(t){}return null}function checkAttrOrString(t){return!(!t||"string"!=typeof t&&("object"!=typeof t||isArray(t)))}function isArray(t){return"[object Array]"==={}.toString.call(t)}function isNotANumber(t){return!isNaN(parseInt(t,10))}function checkMD5(t,e){try{return t===MD5(e)}catch(t){return!1}}function Looper(){}function send(t){network.getType({success(e){"none"!==e.type&&hasEnvelope(t,(e,n)=>{if(e){if(n){const e={md5Key:n,type:"second"};RequestHelper.getInstance().send(e,()=>{StoreQueue.getInstance().handleMessage(null);realSend(t)})}}else realSend(t)})},fail(){}})}function hasEnvelope(t,e){StorageUtil.getData(constants.KEY_NO_SEND_REQUEST_KEYS,n=>{if(!n)return void e(!1,null);const o=UmengUtils.stringToArray(n);if(!o||0===o.length)return void e(!1,null);for(const n in o)if({}.hasOwnProperty.call(o,n)){const i=o[n];if(i){const n=i.indexOf(constants.KEY_EVENT_PREFIX);if(0===n&&t===constants.REQUEST_TYPE_EVENT)return void e(!0,i);const o=i.indexOf(constants.KEY_HALF_SESSION_PREFIX);if(0===o&&t===constants.REQUEST_TYPE_SESSION_HALF)return void e(!0,i);const r=i.indexOf(constants.KEY_CLOSE_SESSION_PREFIX);if(0===r&&t===constants.REQUEST_TYPE_SESSION_CLOSE)return void e(!0,i)}}e(!1,null)})}function realSend(t){if(RequestHelper.getInstance().paramsIsValid(t))if(t===constants.REQUEST_TYPE_SESSION_HALF){const e=RequestHelper.getInstance().buildSendContent(t,null),n=e.data;n.analytics&&RequestHelper.getInstance().send(e,t=>{t&&-1!==t.indexOf(constants.KEY_HALF_SESSION_PREFIX)&&(Header.getInstance().setFirstSendFlag(),StorageUtil.putData(constants.APP_FIRST_OPEN_FLAG,"false"))})}else if(t===constants.REQUEST_TYPE_SESSION_CLOSE){const e=RequestHelper.getInstance().buildSendContent(t,null);if(e&&e.data){const t=e.data;t.analytics&&RequestHelper.getInstance().send(e)}}else t===constants.REQUEST_TYPE_EVENT&&EventStoreQueue.getInstance().readEkvDatas(e=>{if(!e||0===e.length)return;const n=RequestHelper.getInstance().buildSendContent(t,e);if(n){const t=n.data;t.analytics&&(RequestHelper.getInstance().send(n),EventController.getInstance().setSendTime())}})}function sendAll(){if(0===time){time=10;const t=setInterval(()=>{time-=1;0===time&&clearInterval(t)},100);Header.getInstance().getHeader()?(send(constants.REQUEST_TYPE_SESSION_HALF),send(constants.REQUEST_TYPE_SESSION_CLOSE),send(constants.REQUEST_TYPE_EVENT)):setTimeout(sendAll,100)}}function PageController(){this._pagelist=[],this._currentPage={},this.pageObject={}}function UmengAnalysisLib(){this.pageController=new PageController}function isInit(){return!!inited||(console.error("[app.ux] ==> onCreate not invoked init() method"),!1)}function sendDatas(){Header.getInstance().getHeader()?(Request.send(constants.REQUEST_TYPE_SESSION_HALF),Request.send(constants.REQUEST_TYPE_SESSION_CLOSE),StorageUtil.getData(constants.EVENT_SEND_REPORT_POLICY,t=>{t===constants.EVENT_SEND_REPORT_POLICY_START_SEND_VALUE&&Request.send(constants.REQUEST_TYPE_EVENT)})):setTimeout(sendDatas,100)}function SdkUpdater(){this.url=constants.SDK_UPDATE_SERVER_ADDRESS}function Page(t){if(t){const e=t.onShow;t.onShow=function(...t){try{UmengAnalysis.resume(this)}catch(t){}if(e)return e.apply(this,t)};const n=t.onHide;t.onHide=function(...t){try{UmengAnalysis.pause(this)}catch(t){}if(n)return n.apply(this,t)}}return t}import storage from"@system.storage";import device from"@system.device";import network from"@system.network";import router from"@system.router";import App from"@system.app";import fetch from"@system.fetch";import file from"@system.file";import request from"@system.request";const StorageUtil={putData(t,e,n,o){storage.set({key:t,value:e,success(t){n&&n(t)},fail(t,e){o&&o(t,e)}})},getData(t,e,n){storage.get({key:t,success(t){e&&e(t)},fail(t,e){n&&n(t,e)}})},deleteData(t,e){storage.delete({key:t,success(){e&&e(!0)},fail(){e&&e(!1)}})}},constants={KEY_NO_SEND_REQUEST_KEYS:"umeng_key_no_send_request",SESSION_INTERVAL:3e4,TEST_URL:"https://preulogs.umeng.com/unify_logs",RELEASE_URL:"https://ulogs.umeng.com/unify_logs",KEY_SESSION_PREFIX:"umeng_session_prefix_",KEY_EVENT_PREFIX:"umeng_event_prefix_",KEY_HALF_SESSION_PREFIX:"umeng_half_session_prefix_",KEY_CLOSE_SESSION_PREFIX:"umeng_close_session_prefix_",REQUEST_TYPE_SESSION_HALF:1,REQUEST_TYPE_SESSION_CLOSE:2,REQUEST_TYPE_EVENT:3,IS_DEBUG:!1,SDK_VERSION:"2.0.0",APP_FIRST_OPEN_FLAG:"umeng_key_first_open_flag",MOBILE_ADVERTISING_ID:"umeng_mobile_advertising_id",MOBILE_ANDROID_ID:"umeng_android__id",EVENT_SEND_MIN_INTERVAL:90,EVENT_SEND_MAX_INTERVAL:86400,EVENT_LAST_SEND_TIME:"umeng_ekv_last_send_time",EVENT_SEND_REPORT_POLICY:"event_send_report_policy",EVENT_SEND_REPORT_INTERVAL_TIME:"event_send_report_interval_time",EVENT_SEND_REPORT_POLICY_START_SEND_VALUE:"1",EVENT_SEND_REPORT_POLICY_INTERVAL_VALUE:"6",DOWNLOAD_FILE_FIRST_CACHE:"umeng_sdk_update_firstCacheLevel",DOWNLOAD_FILE_SECOND_CACHE:"umeng_sdk_update_secondCacheLevel",SDK_UPDATE_SERVER_ADDRESS:"http://s.cnzz.com/sdk/quickapp",SDK_UPDATE_LOCAL_STORAGE_PATH:"internal://files/umengsdk/"},DeviceUtil={getBaseInfo(){return new Promise(t=>{device.getInfo({success(e){t(e)},fail(){t(null)}})})},getNetworkInfo(t){network.getType({success(e){t(e)}})},getAndroidId(){return new Promise(t=>{device.getUserId({success(e){t(e.userId)},fail(){t("")}})})},getAdvertisingId(){return new Promise(t=>{device.getAdvertisingId({success(e){t(e.advertisingId)},fail(){t("")}})})},getUniqueId(){return new Promise(t=>{StorageUtil.getData("umeng_uniqueid",e=>{e?t(e):buildUniqueId(t)},()=>{buildUniqueId(t)})})},getPageName(){try{const t=router.getState();return t.name}catch(t){}},getSystemBaseInfo(t,e){device.getInfo({success(e){t&&t(e)},fail(t,n){e&&e(t,n)}})}},Log={d(t){},i(t){try{userDebug&&console.info(t)}catch(t){}},e(t){},w(t){},v(t){}};var commonjsGlobal="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},MD5=createCommonjsModule(function(t){!function(e){function n(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function o(t,e){return t<<e|t>>>32-e}function i(t,e,i,r,s,c){return n(o(n(n(e,t),n(r,c)),s),i)}function r(t,e,n,o,r,s,c){return i(e&n|~e&o,t,e,r,s,c)}function s(t,e,n,o,r,s,c){return i(e&o|n&~o,t,e,r,s,c)}function c(t,e,n,o,r,s,c){return i(e^n^o,t,e,r,s,c)}function a(t,e,n,o,r,s,c){return i(n^(e|~o),t,e,r,s,c)}function u(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;var o,i,u,f,l,_=1732584193,E=-271733879,g=-1732584194,S=271733878;for(o=0;o<t.length;o+=16)i=_,u=E,f=g,l=S,E=a(E=a(E=a(E=a(E=c(E=c(E=c(E=c(E=s(E=s(E=s(E=s(E=r(E=r(E=r(E=r(E,g=r(g,S=r(S,_=r(_,E,g,S,t[o],7,-680876936),E,g,t[o+1],12,-389564586),_,E,t[o+2],17,606105819),S,_,t[o+3],22,-1044525330),g=r(g,S=r(S,_=r(_,E,g,S,t[o+4],7,-176418897),E,g,t[o+5],12,1200080426),_,E,t[o+6],17,-1473231341),S,_,t[o+7],22,-45705983),g=r(g,S=r(S,_=r(_,E,g,S,t[o+8],7,1770035416),E,g,t[o+9],12,-1958414417),_,E,t[o+10],17,-42063),S,_,t[o+11],22,-1990404162),g=r(g,S=r(S,_=r(_,E,g,S,t[o+12],7,1804603682),E,g,t[o+13],12,-40341101),_,E,t[o+14],17,-1502002290),S,_,t[o+15],22,1236535329),g=s(g,S=s(S,_=s(_,E,g,S,t[o+1],5,-165796510),E,g,t[o+6],9,-1069501632),_,E,t[o+11],14,643717713),S,_,t[o],20,-373897302),g=s(g,S=s(S,_=s(_,E,g,S,t[o+5],5,-701558691),E,g,t[o+10],9,38016083),_,E,t[o+15],14,-660478335),S,_,t[o+4],20,-405537848),g=s(g,S=s(S,_=s(_,E,g,S,t[o+9],5,568446438),E,g,t[o+14],9,-1019803690),_,E,t[o+3],14,-187363961),S,_,t[o+8],20,1163531501),g=s(g,S=s(S,_=s(_,E,g,S,t[o+13],5,-1444681467),E,g,t[o+2],9,-51403784),_,E,t[o+7],14,1735328473),S,_,t[o+12],20,-1926607734),g=c(g,S=c(S,_=c(_,E,g,S,t[o+5],4,-378558),E,g,t[o+8],11,-2022574463),_,E,t[o+11],16,1839030562),S,_,t[o+14],23,-35309556),g=c(g,S=c(S,_=c(_,E,g,S,t[o+1],4,-1530992060),E,g,t[o+4],11,1272893353),_,E,t[o+7],16,-155497632),S,_,t[o+10],23,-1094730640),g=c(g,S=c(S,_=c(_,E,g,S,t[o+13],4,681279174),E,g,t[o],11,-358537222),_,E,t[o+3],16,-722521979),S,_,t[o+6],23,76029189),g=c(g,S=c(S,_=c(_,E,g,S,t[o+9],4,-640364487),E,g,t[o+12],11,-421815835),_,E,t[o+15],16,530742520),S,_,t[o+2],23,-995338651),g=a(g,S=a(S,_=a(_,E,g,S,t[o],6,-198630844),E,g,t[o+7],10,1126891415),_,E,t[o+14],15,-1416354905),S,_,t[o+5],21,-57434055),g=a(g,S=a(S,_=a(_,E,g,S,t[o+12],6,1700485571),E,g,t[o+3],10,-1894986606),_,E,t[o+10],15,-1051523),S,_,t[o+1],21,-2054922799),g=a(g,S=a(S,_=a(_,E,g,S,t[o+8],6,1873313359),E,g,t[o+15],10,-30611744),_,E,t[o+6],15,-1560198380),S,_,t[o+13],21,1309151649),g=a(g,S=a(S,_=a(_,E,g,S,t[o+4],6,-145523070),E,g,t[o+11],10,-1120210379),_,E,t[o+2],15,718787259),S,_,t[o+9],21,-343485551),_=n(_,i),E=n(E,u),g=n(g,f),S=n(S,l);return[_,E,g,S]}function f(t){var e,n="",o=32*t.length;for(e=0;e<o;e+=8)n+=String.fromCharCode(t[e>>5]>>>e%32&255);return n}function l(t){var e,n=[];for(n[(t.length>>2)-1]=void 0,e=0;e<n.length;e+=1)n[e]=0;var o=8*t.length;for(e=0;e<o;e+=8)n[e>>5]|=(255&t.charCodeAt(e/8))<<e%32;return n}function _(t){return f(u(l(t),8*t.length))}function E(t,e){var n,o,i=l(t),r=[],s=[];for(r[15]=s[15]=void 0,i.length>16&&(i=u(i,8*t.length)),n=0;n<16;n+=1)r[n]=909522486^i[n],s[n]=1549556828^i[n];return o=u(r.concat(l(e)),512+8*e.length),f(u(s.concat(o),640))}function g(t){var e,n,o="";for(n=0;n<t.length;n+=1)e=t.charCodeAt(n),o+="0123456789abcdef".charAt(e>>>4&15)+"0123456789abcdef".charAt(15&e);return o}function S(t){return unescape(encodeURIComponent(t))}function d(t){return _(S(t))}function p(t){return g(d(t))}function h(t,e){return E(S(t),S(e))}function U(t,e){return g(h(t,e))}function N(t,e,n){return e?n?h(e,t):U(e,t):n?d(t):p(t)}t.exports?t.exports=N:e.md5=N}(commonjsGlobal)}),Base64_1=createCommonjsModule(function(module,exports){!function(global,factory){module.exports=function(global){var _Base64=global.Base64,version="2.4.8",buffer;if(module.exports)try{buffer=eval("require('buffer').Buffer")}catch(t){buffer=void 0}var b64chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64tab=function(t){for(var e={},n=0,o=t.length;n<o;n++)e[t.charAt(n)]=n;return e}(b64chars),fromCharCode=String.fromCharCode,cb_utob=function(t){if(t.length<2)return(e=t.charCodeAt(0))<128?t:e<2048?fromCharCode(192|e>>>6)+fromCharCode(128|63&e):fromCharCode(224|e>>>12&15)+fromCharCode(128|e>>>6&63)+fromCharCode(128|63&e);var e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return fromCharCode(240|e>>>18&7)+fromCharCode(128|e>>>12&63)+fromCharCode(128|e>>>6&63)+fromCharCode(128|63&e)},re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=function(t){return t.replace(/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,cb_utob)},cb_encode=function(t){var e=[0,2,1][t.length%3],n=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0);return[b64chars.charAt(n>>>18),b64chars.charAt(n>>>12&63),e>=2?"=":b64chars.charAt(n>>>6&63),e>=1?"=":b64chars.charAt(63&n)].join("")},btoa=global.btoa?function(t){return global.btoa(t)}:function(t){return t.replace(/[\s\S]{1,3}/g,cb_encode)},_encode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(t){return(t.constructor===buffer.constructor?t:buffer.from(t)).toString("base64")}:function(t){return(t.constructor===buffer.constructor?t:new buffer(t)).toString("base64")}:function(t){return btoa(utob(t))},encode=function(t,e){return e?_encode(String(t)).replace(/[+\/]/g,function(t){return"+"==t?"-":"_"}).replace(/=/g,""):_encode(String(t))},encodeURI=function(t){return encode(t,!0)},re_btou=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),cb_btou=function(t){switch(t.length){case 4:var e=((7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3))-65536;return fromCharCode(55296+(e>>>10))+fromCharCode(56320+(1023&e));case 3:return fromCharCode((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return fromCharCode((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},btou=function(t){return t.replace(re_btou,cb_btou)},cb_decode=function(t){var e=t.length,n=e%4,o=(e>0?b64tab[t.charAt(0)]<<18:0)|(e>1?b64tab[t.charAt(1)]<<12:0)|(e>2?b64tab[t.charAt(2)]<<6:0)|(e>3?b64tab[t.charAt(3)]:0),i=[fromCharCode(o>>>16),fromCharCode(o>>>8&255),fromCharCode(255&o)];return i.length-=[0,0,2,1][n],i.join("")},atob=global.atob?function(t){return global.atob(t)}:function(t){return t.replace(/[\s\S]{1,4}/g,cb_decode)},_decode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(t){return(t.constructor===buffer.constructor?t:buffer.from(t,"base64")).toString()}:function(t){return(t.constructor===buffer.constructor?t:new buffer(t,"base64")).toString()}:function(t){return btou(atob(t))},decode=function(t){return _decode(String(t).replace(/[-_]/g,function(t){return"-"==t?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},noConflict=function(){var t=global.Base64;return global.Base64=_Base64,t};if(global.Base64={VERSION:"2.4.8",atob:atob,btoa:btoa,fromBase64:decode,toBase64:encode,utob:utob,encode:encode,encodeURI:encodeURI,btou:btou,decode:decode,noConflict:noConflict,__buffer__:buffer},"function"==typeof Object.defineProperty){var noEnum=function(t){return{value:t,enumerable:!1,writable:!0,configurable:!0}};global.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",noEnum(function(){return decode(this)})),Object.defineProperty(String.prototype,"toBase64",noEnum(function(t){return encode(this,t)})),Object.defineProperty(String.prototype,"toBase64URI",noEnum(function(){return encode(this,!0)}))}}return global.Meteor&&(Base64=global.Base64),module.exports&&(module.exports.Base64=global.Base64),{Base64:global.Base64}}(global)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:commonjsGlobal)}),Base64_2=Base64_1.Base64,UmengUtils={MD5:MD5$1,encode:encode,decode:decode,checkEmptyArgument:checkEmptyArgument,checkId:checkId,stringToArray:stringToArray,toStr:toStr,toObject:toObject,checkAttrOrString:checkAttrOrString,isNotANumber:isNotANumber,checkMD5:checkMD5};const $JSON_UMENG_SESSIONS$="json_umeng_sessions",$JSON_UMENG_HALF_SESSIONS$="json_umeng_half_session",$JSON_UMENG_CURRENT_SESSION$="json_umeng_current_session",$JSON_UMENG_PAGE_END_TIME$="json_umeng_page_end_time",Session=function(){function t(){return{getCurrentSessionId(){return f},getCurrentSession(){return a},getSessions(){return l},init(t){this.appkey=t,o()},endSession(){a&&(c=Date.now(),a.end_time=c,StorageUtil.putData($JSON_UMENG_CURRENT_SESSION$,UmengUtils.toStr(a)),StorageUtil.putData($JSON_UMENG_PAGE_END_TIME$,c))},clearSessions(){StorageUtil.deleteData($JSON_UMENG_SESSIONS$),l.splice(0,l.length),l=[]},setOnSessionListener(t){this.sessionListener=t},getHalfSessions(){return _},clearHalfSession(){StorageUtil.deleteData($JSON_UMENG_HALF_SESSIONS$),_.splice(0,_.length),_=[]}}}function e(t,e){const n=Date.now();DeviceUtil.getUniqueId().then(t=>{const o=UmengUtils.MD5(`${n}:::${Session.getInstance().appkey}:::${t}`);e(o)})}function n(t){const e={};return e.id=t,e.start_time=Date.now(),e}function o(){const t=Date.now();a?c&&t-c>constants.SESSION_INTERVAL&&(i(c),r(a)):StorageUtil.getData($JSON_UMENG_CURRENT_SESSION$,e=>{e&&(a=UmengUtils.toObject(e))?StorageUtil.getData($JSON_UMENG_PAGE_END_TIME$,e=>{e&&t-e>constants.SESSION_INTERVAL?(i(e),r(a)):f=a.id}):r(null)})}function i(t){try{a.end_time=parseInt(t,10)}catch(e){a.end_time=t}const e=t-a.start_time;a.duration=e}function r(t){const o=t?t.id:"",i=Session.getInstance().sessionListener(o);e(o,e=>{a=n(e);StorageUtil.getData($JSON_UMENG_SESSIONS$,n=>{l=UmengUtils.stringToArray(n);t?i.pages(n=>{n&&n.length>0&&(t.pages=n,t.$page_num=n.length);l.push(t);StorageUtil.putData($JSON_UMENG_SESSIONS$,UmengUtils.toStr(l));s(i,e)}):s(i,e)});StorageUtil.putData($JSON_UMENG_CURRENT_SESSION$,UmengUtils.toStr(a));f=e})}function s(t,e){StorageUtil.getData($JSON_UMENG_HALF_SESSIONS$,n=>{_=UmengUtils.stringToArray(n);a&&(_.push(JSON.parse(JSON.stringify(a))),StorageUtil.putData($JSON_UMENG_HALF_SESSIONS$,UmengUtils.toStr(_)),t.generateSessionAfterHandler(e))})}let c,a,u=null,f="",l=[],_=[];return{getInstance(){return u||(u=t()),u}}}(),$JSON_UMENG_HEADER$="json_umeng_header",$UMENG_KEY_IMPRINT$="umeng_key_imprint",MOBILE_NETWORK_2G="2g",MOBILE_NETWORK_3G="3g",MOBILE_NETWORK_4G="4g",MOBILE_NETWORK_NONE="none",BLANK_SPACE=" ",UMENG_ADVERTISTING_ID="idfa",UMENG_ANDROID_ID="android_id",Header=function(){function t(){return{init(t){this.appkey=t,this.appInfo=App.getInfo(),e(t=>{this.header=t;StorageUtil.putData($JSON_UMENG_HEADER$,UmengUtils.toStr(t))})},getHeader(t){switch(t){case constants.REQUEST_TYPE_SESSION_HALF:this.header.st="1",!0===s&&delete this.header.atm;break;case constants.REQUEST_TYPE_SESSION_CLOSE:case constants.REQUEST_TYPE_EVENT:delete this.header.st,delete this.header.atm}return this.header},addHeaderAttr(t,e){this.header&&(this.header[t]=e)},getHeaderAttr(t){return this.header&&{}.hasOwnProperty.call(this.header,t)?this.header[t]:null},getPackageName(){try{return this.appInfo.packageName}catch(t){}return""},setFirstSendFlag(){s=!0}}}function e(t){DeviceUtil.getBaseInfo().then(e=>{DeviceUtil.getUniqueId().then(r=>{DeviceUtil.getNetworkInfo(s=>{let{type:type}=s;type===MOBILE_NETWORK_NONE&&(type="unknown");const c=i(e,r,type);StorageUtil.getData($UMENG_KEY_IMPRINT$,e=>{0!==e.length&&(c.imprint=e);StorageUtil.getData(constants.APP_FIRST_OPEN_FLAG,e=>{const i="true"===e;let r=new Date;i&&(r=new Date,c.atm="1");console.log(r);StorageUtil.getData(constants.MOBILE_ADVERTISING_ID,e=>{if(e){const t=n(e);if(t){const e=o(UMENG_ADVERTISTING_ID,t);c.id_tracking=e}}StorageUtil.getData(constants.MOBILE_ANDROID_ID,e=>{if(e){const t=n(e);if(t)if(c.id_tracking&&c.id_tracking.snapshots)c.id_tracking.snapshots[UMENG_ANDROID_ID]=t;else{const e=o(UMENG_ANDROID_ID,t);c.id_tracking=e}}t(c)})})})})})})})}function n(t){if(t){const e={identity:t,version:1,ts:Date.now()};return e}}function o(t,e){const n={snapshots:{}};return n.snapshots[t]=e,n}function i(t,e,n){let o=null;if(t){const n=t.screenWidth,i=t.screenHeight,s=n>i?`${n}*${i}`:`${i}*${n}`,{appInfo:appInfo}=r,{model:model,brand:brand}=t,c=brand.toLowerCase();o={app_version:appInfo.versionName,version_code:appInfo.versionCode,app_source_extra:appInfo.source.extra,device_type:"Phone",package_name:appInfo.packageName,sdk_type:"Android",os:"Android",sdk_version:constants.SDK_VERSION,appkey:r.appkey,device_model:model.toLowerCase().indexOf(c)>-1?model:c+BLANK_SPACE+model,device_brand:brand,channel:c,device_manufacturer:t.manufacturer,device_manuid:model.toLowerCase().indexOf(c)>-1?model:c+BLANK_SPACE+model,device_name:t.product.toLowerCase().indexOf(c)>-1?t.product:c+BLANK_SPACE+t.product,os_version:t.osVersionName,resolution:s,language:t.language,display_name:t.name,idmd5:UmengUtils.MD5(e),platform:"quickapp",pro_ver:"1"}}else o={app_version:r.appInfo.versionName,version_code:r.appInfo.versionCode,device_type:"Phone",package_name:r.appInfo.packageName,sdk_type:"Android",os:"Android",sdk_version:constants.SDK_VERSION,appkey:r.appkey,idmd5:UmengUtils.MD5(e),platform:"quickapp",pro_ver:"1"};switch(n){case MOBILE_NETWORK_4G:o.access_subtype="LTE",o.access="2G/3G";break;case MOBILE_NETWORK_3G:o.access_subtype="CDMA",o.access="2G/3G";break;case MOBILE_NETWORK_2G:o.access_subtype="GRPS",o.access="2G/3G";break;default:o.access=n,delete o.access_subtype}return o}let r=null,s=!1;return{getInstance(){return r||(r=t()),r}}}();Looper.prototype={prepare(t){this.queueObject=t,this.isRunning=!1,this.isForceStop=!1},loop(){if(!this.isForceStop&&this.queueObject&&!this.isRunning)for(this.isRunning=!0;this.isRunning;){if(!this.queueObject.isCanPop()){this.isRunning=!1;break}try{this.queueObject.dispatchMessage()}catch(t){}}},wait(){this.isRunning=!1},forceStop(){this.isForceStop=!0},cancelForceStop(){this.isForceStop=!1,this.loop()}};const RequestQueue=function(){function t(t){return!!t&&(f.unshift(t),u.loop(),!0)}function e(){if(f.length>0)return f.pop();const t=l.length;return t>0?(1===t&&RequestHelper.getInstance().clearNoSendDatas(),l.pop()):null}function n(t,e){const n=setTimeout(()=>{o(t)},3e4),i={key:t,timeOutFun:n,isExe:!1};g.push(i),e(t=>{o(t)})}function o(t){for(let e=g.length-1;e>=0;e--){const n=g[e];if(n.key===t){if(!n.isExe){n.isExe=!0;const t=n.timeOutFun;t&&clearTimeout(t),i(),g.splice(e,1)}break}}}function i(){(E-=1)<=_&&u.loop()}function r(t){const e=g.length,n=t.md5Key;for(let t=e-1;t>=0;t--){const e=g[t];if(e.key===n)return i(),!0}return!1}function s(){RequestHelper.getInstance().onNoSendDatasListener(t=>{if(!t||0===t.length)return;for(const e in t)if({}.hasOwnProperty.call(t,e)){const n={md5Key:t[e],type:"second"};l.push(n)}u.loop()})}function c(){return s(),{handleMessage(e,n){e&&"second"===e.type&&i(),e&&e.data&&(e.executeFunction=n,t(e))},dispatchMessage(){if(E>_)return void u.wait();E+=1;const t=e();r(t)||(t.data?n(t.md5Key,t.executeFunction):RequestHelper.getInstance().send(t),this.isCanPop()||u.wait())},isCanPop(){return f.length>0||l.length>0}}}let a,u;const f=[],l=[],_=3;let E=1;const g=[];return{getInstance(){return a||(a=c(),(u=new Looper).prepare(a)),a}}}(),StoreQueue=function(){function t(t){if(!t)return!1;const e={key:t,type:_};return u.unshift(e),a.loop(),!0}function e(){if(u.length>0)return u.pop();const t=f.length;if(t>0){const e=f.pop();return 0===t&&n(),e}return n(),null}function n(){g||(g=!0,StorageUtil.getData(constants.KEY_NO_SEND_REQUEST_KEYS,t=>{g=!1;if(!t)return;const e=UmengUtils.stringToArray(t);const n=t=>e=>{e&&'""'!==e||(e={key:t,type:E},f.push(e));f.length>0&&a.loop()};for(const t in e)if({}.hasOwnProperty.call(e,t)){const o=e[t];StorageUtil.getData(o,n(o))}},()=>{g=!1}))}function o(t){StorageUtil.getData(constants.KEY_NO_SEND_REQUEST_KEYS,e=>{e=e?UmengUtils.toObject(e):[];e.push(t);StorageUtil.putData(constants.KEY_NO_SEND_REQUEST_KEYS,UmengUtils.toStr(e),()=>{r(t)},()=>{r(t)})},()=>{r(t)})}function i(t){StorageUtil.getData(constants.KEY_NO_SEND_REQUEST_KEYS,e=>{if(!e)return void r(t);e=UmengUtils.stringToArray(e);for(const n in e)if({}.hasOwnProperty.call(e,n)){const o=e[n];if(o===t){e.splice(n,1);break}}StorageUtil.putData(constants.KEY_NO_SEND_REQUEST_KEYS,UmengUtils.toStr(e),()=>{r(t)},()=>{r(t)})},()=>{r(t)})}function r(){(S-=1)<=l&&a.loop()}function s(){return n(),{handleMessage(e){e?t(e):n()},dispatchMessage(){if(S>l)return void a.wait();S+=1;const t=e();if(!t||null===t)return void r();const{key:key}=t;t.type===_?o(key):i(key),this.isCanPop()||a.wait()},isCanPop(){return u.length>0||f.length>0}}}let c,a;const u=[],f=[],l=1,_="write",E="delete";let g=!1,S=1;return{getInstance(){return c||(c=s(),(a=new Looper).prepare(c)),c}}}(),$UMENG_KEY_IMPRINT$$1="umeng_key_imprint";let noSendRequestKeys=[];const RequestHelper=function(){function t(){const t=[].concat(Session.getInstance().getSessions());if(t&&0!==t.length)return Session.getInstance().clearSessions(),t}function e(){const t=[].concat(Session.getInstance().getHalfSessions());if(t&&0!==t.length)return Session.getInstance().clearHalfSession(),t}function n(t){StorageUtil.deleteData(t,t=>{t&&StoreQueue.getInstance().handleMessage(null)})}function o(t,e,o,r){if(!t||'""'===t)return void(o&&o(e));const s=constants.RELEASE_URL;fetch.fetch({url:s,method:"POST",data:UmengUtils.encode(t),header:{"Content-Type":"quickapp/json","Msg-Type":"quickapp/json"},success(t){if(200===t.code){Log.i("*** umeng_sdk *** request send success"),n(e),r&&r(e);try{const e=UmengUtils.toObject(t.data);i(e.imprint)}catch(t){}}else 413===t.code&&(Log.i("*** umeng_sdk *** request is to large!"),n(e),r&&r(e))},fail:function(t,e){Log.i("*** umeng_sdk *** request error, please check your permission! ")},complete(){o&&o(e)}})}function i(t){try{if(t){StorageUtil.putData($UMENG_KEY_IMPRINT$$1,t),Header.getInstance().addHeaderAttr("imprint",t);const e=UmengUtils.toObject(UmengUtils.decode(t)),n=e.report_policy;if(n&&UmengUtils.isNotANumber(n)){if(StorageUtil.putData(constants.EVENT_SEND_REPORT_POLICY,n),n===constants.EVENT_SEND_REPORT_POLICY_INTERVAL_VALUE){let t=e.report_interval;t&&UmengUtils.isNotANumber(t)?(t<=constants.EVENT_SEND_MIN_INTERVAL?t=constants.EVENT_SEND_MIN_INTERVAL:t>constants.EVENT_SEND_MAX_INTERVAL&&(t=constants.EVENT_SEND_MAX_INTERVAL),StorageUtil.putData(constants.EVENT_SEND_REPORT_INTERVAL_TIME,t)):StorageUtil.putData(constants.EVENT_SEND_REPORT_POLICY,constants.EVENT_SEND_REPORT_POLICY_START_SEND_VALUE)}}else StorageUtil.putData(constants.EVENT_SEND_REPORT_POLICY,constants.EVENT_SEND_REPORT_POLICY_START_SEND_VALUE)}}catch(t){}}function r(t,e){const n=UmengUtils.toStr(e);let o=null;switch(t){case constants.REQUEST_TYPE_SESSION_HALF:o=constants.KEY_HALF_SESSION_PREFIX;break;case constants.REQUEST_TYPE_SESSION_CLOSE:o=constants.KEY_CLOSE_SESSION_PREFIX;break;case constants.REQUEST_TYPE_EVENT:o=constants.KEY_EVENT_PREFIX}const i=o+UmengUtils.MD5(n);return StorageUtil.putData(i,n),StoreQueue.getInstance().handleMessage(i),0===noSendRequestKeys.length&&StorageUtil.getData(constants.KEY_NO_SEND_REQUEST_KEYS,t=>{if(!t)return;const e=UmengUtils.stringToArray(t);0===noSendRequestKeys.length&&(noSendRequestKeys=e,a&&a(noSendRequestKeys))}),i}function s(){return{paramsIsValid(t){return-1!==[constants.REQUEST_TYPE_SESSION_HALF,constants.REQUEST_TYPE_SESSION_CLOSE,constants.REQUEST_TYPE_EVENT].indexOf(t)},buildSendContent(n,o){if(Header.getInstance().getHeader(n)){const i={header:Header.getInstance().getHeader(n),analytics:null};switch(n){case constants.REQUEST_TYPE_SESSION_HALF:{const t=e();if(!t)break;i.analytics={sessions:t};break}case constants.REQUEST_TYPE_SESSION_CLOSE:{const e=t();if(!e)break;i.analytics={sessions:e};break}case constants.REQUEST_TYPE_EVENT:o&&o.length>0&&(i.analytics={ekv:o})}let s="";return i.analytics&&(s=r(n,i)),{data:i,md5Key:s}}},send(t,e){const n=t.md5Key;n&&("second"===t.type?StorageUtil.getData(n,n=>{t.data=UmengUtils.toObject(n);t.data||e&&e();RequestQueue.getInstance().handleMessage(t,n=>{o(UmengUtils.toStr(t.data),t.md5Key,n,e)})}):RequestQueue.getInstance().handleMessage(t,n=>{o(UmengUtils.toStr(t.data),t.md5Key,n,e)}))},getNoSendRequestKeys(){return noSendRequestKeys},onNoSendDatasListener(t){a=t},clearNoSendDatas(){noSendRequestKeys.splice(0,noSendRequestKeys.length),noSendRequestKeys=[]}}}let c,a;return{getInstance(){return c||(c=s()),c}}}(),EventStoreQueue=function(){function t(t){if(t){if(!Session.getInstance().getCurrentSessionId())return void U.unshift(t);h.unshift(t),h.length>=_&&g.loop()}}function e(){return h.length<_?null:h.splice(0,_)}function n(){p&&p.length>0&&s(t=>{for(const e in p)if({}.hasOwnProperty.call(p,e))try{p[e](t)}catch(t){}}),(S-=1)<1&&(S=1),S<=E&&g.loop()}function o(t,e){StorageUtil.putData(u,e,()=>{StorageUtil.putData(f,UmengUtils.toStr(t),()=>{n()},()=>{n()})},()=>{n()})}function i(t,e){t&&(p[t]=e)}function r(t){t&&delete p[t]}function s(t){StorageUtil.getData(f,e=>{StorageUtil.deleteData(f,()=>{const n=c(UmengUtils.stringToArray(e),h);h.splice(0,h.length);t(n);g.cancelForceStop()})},()=>{t([]);g.cancelForceStop()})}function c(t,e){const n=Session.getInstance().getCurrentSessionId();let o,i=-1;for(const e in t)if({}.hasOwnProperty.call(t,e)){const r=t[e];if(o=r[n]){i=e;break}}return-1===i&&(o=[]),(o=o.concat(e))&&0!==o.length?(-1===i?t.push({[n]:o}):t[i][n]=o,t):t}function a(){return{saveEkvData(e){t(e),Log.d(`[saveEkvData] data is ${UmengUtils.toStr(e)}`)},readEkvDatas(t){t&&(g.forceStop(),S<=E?s(e=>{t(e);g.cancelForceStop()}):i("readEkvDatas",e=>{t(e);r("readEkvDatas");g.cancelForceStop()}))},handlerNoSessionEkvDatas(){if(U&&U.length>0){Log.d(`no sessionId event is ${JSON.stringify(U)}`);for(const t in U)({}).hasOwnProperty.call(U,t)&&this.saveEkvData(U[t]);U.splice(0,U.length)}},quitHandler(){0!==h.length&&(g.forceStop(),S<=E?StorageUtil.getData(f,t=>{const e=c(UmengUtils.stringToArray(t),h);StorageUtil.putData(f,UmengUtils.toStr(e));h.splice(0,h.length);g.cancelForceStop()},()=>{g.cancelForceStop()}):i("quitHandler",t=>{const e=UmengUtils.toStr(c(t,h));StorageUtil.putData(f,e);h.splice(0,h.length);r("quitHandler");g.cancelForceStop()}))},dispatchMessage(){if(S>E)return void g.wait();S+=1;const t=e();if(!t||0===t.length)return void n();StorageUtil.getData(u,e=>{e||(e=0);e>=l+t.length?n():StorageUtil.getData(f,n=>{const i=c(UmengUtils.stringToArray(n),t);o(i,Number(e)+Number(t.length))},()=>{n()})},()=>{n()})},isCanPop(){return h.length>=_}}}const u="umeng_ekv_count_key",f="umeng_key_ekvs",l=1e4,_=5,E=1;let g,S=1,d=null;const p={},h=[],U=[];return{getInstance(){return d||(d=new a,(g=new Looper).prepare(d)),d}}}(),EventController=function(){function t(t,e){const n={id:t,ts:Date.now()};switch(typeof e){case"string":n[t]=e;break;case"object":for(const t in e)({}).hasOwnProperty.call(e,t)&&(n[t]=e[t])}return n}function e(){StorageUtil.getData(constants.EVENT_SEND_REPORT_POLICY,t=>{t===constants.EVENT_SEND_REPORT_POLICY_INTERVAL_VALUE&&StorageUtil.getData(constants.EVENT_SEND_REPORT_INTERVAL_TIME,t=>{StorageUtil.getData(constants.EVENT_LAST_SEND_TIME,e=>{if(t){const n=Date.now();e&&n-e>1e3*t&&Request.sendAll()}else StorageUtil.putData(constants.EVENT_SEND_REPORT_POLICY,constants.EVENT_SEND_REPORT_POLICY_START_SEND_VALUE)})})})}function n(){return{addEvent(n,o){const i=t(n,o);EventStoreQueue.getInstance().saveEkvData(i),e()},handlerNoSessionEkvDatas(){EventStoreQueue.getInstance().handlerNoSessionEkvDatas()},quitHandler(){EventStoreQueue.getInstance().quitHandler()},setSendTime(){StorageUtil.putData(constants.EVENT_LAST_SEND_TIME,Date.now())}}}let o;return{getInstance(){return o||(o=n()),o}}}();let time=0;var Request={send:send,sendAll:sendAll};const KEY_PRE_PAGE="umeng_page_";PageController.prototype={addCurrentPage(t){this._currentPage={ts:Date.now(),page_name:DeviceUtil.getPageName()},this.pageObject=t},savePage(t,e){if(t&&e&&this._currentPage.page_name&&e===this.pageObject){const e=Date.now()-this._currentPage.ts;this._currentPage.duration=Math.abs(e),this._pagelist=this._pagelist.concat(this._currentPage),this._currentPage={},this.pageObject={},this.saveStroragePages(t)}},saveStroragePages(t){t&&this._pagelist.length>0&&this.updateStorage(KEY_PRE_PAGE+t,this._pagelist)},getPages(t,e){StorageUtil.getData(KEY_PRE_PAGE+t,n=>{const o=UmengUtils.stringToArray(n).concat(this._pagelist);this.clear(t);e&&e(o)},()=>{e&&e(null)})},updateStorage(t,e){e&&0!==e.length&&StorageUtil.getData(t,n=>{const o=UmengUtils.stringToArray(n).concat(e);StorageUtil.putData(t,UmengUtils.toStr(o),()=>{this._pagelist=[]})})},clear(t){StorageUtil.deleteData(KEY_PRE_PAGE+t),this._pagelist=[]}};let inited=!1;UmengAnalysisLib.prototype={init(t){if(Log.i(`*** umeng_sdk *** sdk version is: ${constants.SDK_VERSION}`),!inited){try{this.appkey=t.$data.umeng_appkey}catch(t){}if(!this.appkey)return inited=!1,void console.error("please set umeng_appkey : [manifest.json --\x3e config:{data:{umeng_appkey: xxx}}]");inited=!0,Header.getInstance().init(this.appkey);const e=this;if(Session.getInstance().setOnSessionListener(t=>({pages(n){e.pageController.getPages(t,n)},generateSessionAfterHandler(t){EventController.getInstance().handlerNoSessionEkvDatas(),sendDatas()}})),StorageUtil.getData(constants.APP_FIRST_OPEN_FLAG,t=>{0===t.length&&StorageUtil.putData(constants.APP_FIRST_OPEN_FLAG,"true")}),StorageUtil.getData(constants.EVENT_SEND_REPORT_POLICY,t=>{t||StorageUtil.putData(constants.EVENT_SEND_REPORT_POLICY,constants.EVENT_SEND_REPORT_POLICY_START_SEND_VALUE)}),StorageUtil.getData(constants.EVENT_LAST_SEND_TIME,t=>{t||EventController.getInstance().setSendTime()}),t)try{Object.defineProperty(t,"_status",{set(t){"destroy"===t&&Request.sendAll()}})}catch(t){}}},resume(t){isInit()&&t&&(Log.i(`*** umeng_sdk *** page name: ${DeviceUtil.getPageName()}`),this.pageController.addCurrentPage(t),Session.getInstance().init(this.appkey))},pause(t){isInit()&&t&&(this.pageController.savePage(Session.getInstance().getCurrentSessionId(),t),Session.getInstance().endSession(),EventController.getInstance().quitHandler())},trackEvent(t,e){if(isInit())return UmengUtils.checkId(t)?e&&!UmengUtils.checkAttrOrString(e)?(console.error("error-----please check trackEvent attr. attr should be 'String' or 'Object'(not include 'Array')"),!1):(Log.i(`*** umeng_sdk *** event id: ${UmengUtils.toStr(t)}${e?` || event attr: ${UmengUtils.toStr(e)}`:""}`),EventController.getInstance().addEvent(t,e),!0):(console.error("error-----please check trackEvent id. id should be 'String' and not null"),!1)}};const FileUtils={getFile(t,e,n){file.readText({uri:t,success(t){e&&e(t.text)},fail(t,e){n&&n(t,e)}})},moveFile(t,e,n,o){file.move({srcUri:t,dstUri:e,success(t){n&&n(t)},fail(t,e){o&&o(t,e)}})},deleteFile(t,e,n){file.delete({uri:t,success(t){e&&e(t)},fail(t,e){n&&n(t,e)}})}},modules={"@system.app":require("@system.app"),"@system.storage":require("@system.storage"),"@system.fetch":require("@system.fetch"),"@system.network":require("@system.network"),"@system.device":require("@system.device"),md5:require("md5"),"js-base64":require("js-base64"),"@system.router":require("@system.router")},callQueue=[],umeng_stat_global=Object.getPrototypeOf(global)||global;SdkUpdater.prototype={init(t,e){this.installApi(t,null);try{DeviceUtil.getSystemBaseInfo(t=>{1e3===t.platformVersionCode?e(0):StorageUtil.getData(constants.DOWNLOAD_FILE_FIRST_CACHE,t=>{t?this.getSdkFileContent(t,(t,n,o)=>{t?e(1,n,o):this.getSecondCacheFile(e)}):this.getSecondCacheFile(e)})})}catch(t){e(0)}},getSecondCacheFile(t){StorageUtil.getData(constants.DOWNLOAD_FILE_SECOND_CACHE,e=>{e?this.getSdkFileContent(e,t):t(0)})},getSdkFileContent(t,e){try{const n=UmengUtils.toObject(t);Log.d(`current sdk:${n.version}${n.md5}${n.filePath}`),FileUtils.getFile(n.filePath,t=>{UmengUtils.checkMD5(n.md5,t)?e(1,t,n.version):e(0)},(t,n)=>{e(0)})}catch(t){e(0)}return!1},downloadFile(t,e,n,o,i){try{request.download({url:t,success(t){Log.d(`handling success ${t.token}`),request.onDownloadComplete({token:t.token,success(t){try{const r=t.uri,s=r.split("/"),c=s[s.length-1];let a=constants.SDK_UPDATE_LOCAL_STORAGE_PATH;a=`${a+Date.now()}/${c}`,FileUtils.moveFile(t.uri,a,t=>{const r={version:e,md5:n,filePath:t,stable:o};i(r)})}catch(t){}},fail(t,e){}})},fail(){}})}catch(t){}},storageFileInfo(t){try{FileUtils.getFile(t.filePath,e=>{Log.d(`---------${JSON.stringify(t)}-----------${UmengUtils.MD5(e)}`);e&&t.md5&&t.md5===UmengUtils.MD5(e)?(StorageUtil.getData(constants.DOWNLOAD_FILE_FIRST_CACHE,e=>{StorageUtil.putData(constants.DOWNLOAD_FILE_FIRST_CACHE,t,t=>{if(e){const t=UmengUtils.toObject(e);!t.stable&&t.filePath&&FileUtils.deleteFile(t.filePath)}})}),t.stable?StorageUtil.getData(constants.DOWNLOAD_FILE_SECOND_CACHE,e=>{StorageUtil.putData(constants.DOWNLOAD_FILE_SECOND_CACHE,t,()=>{if(e){const t=UmengUtils.toObject(e);t.filePath&&FileUtils.deleteFile(t.filePath)}})}):StorageUtil.putData(constants.DOWNLOAD_FILE_FIRST_CACHE,t)):FileUtils.deleteFile(t.filePath,()=>{})})}catch(t){Log.d(`error message: ${t.toString()}`)}},checkVersionNew(t,e,n,o,i,r){const s={version:t,platform:"quickapp",appVersion:n,appKey:e,seedVersion:o,systemBaseInfo:i};fetch.fetch({url:this.url,method:"POST",data:s,success(t){if(200===t.code)try{const e=UmengUtils.toObject(t.data);if(200===e.code&&e.data.update){const t=e.data.info;t&&r(t)}}catch(t){}},fail(t,e){},complete(){}})},createMethod(t,e,n){try{t[e]=n?function(...t){return n[e](...t)}:function(...t){callQueue.push([e,t])}}catch(t){}},installApi(t,e){try{const n=["resume","pause","trackEvent"];for(let o=0,i=n.length;o<i;o++)this.createMethod(t,n[o],e);if(e)for(let t=0,n=callQueue.length;t<n;t++){const n=callQueue[t];e[n[0]](...n[1])}}catch(t){}},compileModule(t,e){try{const t=new Function("module","exports","require",e),n={exports:{}},o=function(t){return t in modules?modules[t]:require(t)};return t(n,n.exports,o),n.exports}catch(t){}},loadModule(t,e){try{let n;if(0===t)n=UmengAnalysisLib;else try{n=this.compileModule(t,e)}catch(t){n=UmengAnalysisLib}return n}catch(t){}return null}};const UmengAnalysis={seed_version:"0.0.1",version:constants.SDK_VERSION,appKey:"",_impl:null,_inited:!1,init(t){if(!this._inited){this._inited=!0,umeng_stat_global.userDubug=!!t.$data.umeng_debug,this.appKey=t.$data.umeng_appkey;const e=new SdkUpdater;e.init(this,(n,o,i)=>{const r=e.loadModule(n,o);if(r){const n=new r;this._impl=n,n.init(t),e.installApi(this,n)}i||(i=this.version);DeviceUtil.getSystemBaseInfo(t=>{if(1e3===t.platformVersionCode)return;e.checkVersionNew(i,this.appKey,App.getInfo().versionName,this.seed_version,t,t=>{t&&e.downloadFile(t.fileUrl,t.version,t.fileMD5,t.stable,t=>{e.storageFileInfo(t)})})})})}}};!function(){umeng_stat_global&&(umeng_stat_global.$umeng_stat=UmengAnalysis,umeng_stat_global.Page=Page)}();export default UmengAnalysis;
//# sourceMappingURL=umenganalysis.es.min.js.map
